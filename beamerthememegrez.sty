\mode<presentation>

\RequirePackage{xcolor}
\RequirePackage{tikz}
\RequirePackage{pgfplots}
\RequirePackage{enumitem}
\RequirePackage{xeCJK}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{algorithm}
\RequirePackage{algorithmic}
\RequirePackage{etoolbox}

\setmainfont{Palatino}
\setsansfont{Times}
\setmonofont[BoldFont=Courier-Bold, ItalicFont=Courier-Oblique]{Courier}
\setCJKmainfont[BoldFont=PingFangSC-Medium]{PingFangSC-Regular}
\setCJKsansfont[BoldFont=STHeitiSC-Medium]{STHeitiSC-Light}
\setCJKmonofont{YuppySC-Regular}
\renewcommand*{\familydefault}{\rmdefault}

\setbeamersize{text margin left=7.5mm,text margin right=7.5mm}

%% useful commands
\def\longdash{\raisebox{0.2ex}{\,-----\,}}
\def\ret{\protect\\[1em]}
\def\tinybreak{\vskip 0pt}
\def\sepline{%
  \tinybreak%
  \makebox[\textwidth][c]{\textcolor{gray}{\rule{\dimexpr\textwidth+3mm\relax}{0.5pt}}}
  \tinybreak%
}

\BeforeBeginEnvironment{displaymath}{\tinybreak}
\AfterEndEnvironment{displaymath}{\tinybreak}

\g@addto@macro{\normalsize}{%
  \setlength{\abovedisplayskip}{5pt}%
  \setlength{\abovedisplayshortskip}{5pt}%
  \setlength{\belowdisplayskip}{5pt}%
  \setlength{\belowdisplayshortskip}{5pt}}

\g@addto@macro{\small}{%
  \setlength{\abovedisplayskip}{3pt}%
  \setlength{\abovedisplayshortskip}{3pt}%
  \setlength{\belowdisplayskip}{3pt}%
  \setlength{\belowdisplayshortskip}{3pt}}

\useinnertheme{megrez}
\useoutertheme{megrez}
\usecolortheme{megrez}

\mode<all>
